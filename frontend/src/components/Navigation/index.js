import { NavLink } from 'react-router-dom';
import { useSelector, useDispatch } from 'react-redux';
import * as sessionActions from '../../store/session';
import ProfileButton from './ProfileButton';
import './Navigation.css';

const Navigation = ({ loaded }) => {
    const dispatch = useDispatch();
    const sessionUser = useSelector(state => state.session.user);

    let sessionLinks;
    if (sessionUser) {
        sessionLinks = (
            <ProfileButton user={sessionUser} />
        )
    } else {
        sessionLinks = (
            <>
                <NavLink to='/login'>Log In</NavLink>
                <NavLink to='/signup'>Sign Up</NavLink>
            </>
        )
    }

    const handleDemoLogin = () => {
        const emails = ['demo@user.io', 'user1@user.io', 'user2@user.io'];
        return dispatch(sessionActions.login({
            credential: emails[Math.floor(Math.random()*emails.length)],
            password: 'P@ssw0rd!'
        }))
    }

    return (
        <nav class='nav-bar-container'>
            <div id='left-nav-info'>
                <NavLink exact to='/'>
                    <svg id="left-nav-icon" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 791.63 699.4" width="50px">
                      <path class="cls-1" d="M394.63,745.18c-35.62,0-71.24.07-106.87,0-11.31,0-22.63-.4-33.93-.93-21.43-1-39-10.78-55.13-24.2-16.47-13.73-24.8-32-30.84-51.91-7.43-24.47-9.81-49.45-8.53-74.88.36-7-.94-7.86-8.17-8.59-22.31-2.23-44.73-4-66.82-7.65C71.57,574.85,58.49,572.1,47,565c-19.59-12.1-32.95-29.19-40.72-50.71-7.5-20.76-8.9-42-2.82-63.25,1.93-6.79,5.42-13.2,8.7-19.52C19.75,417,27.77,402.67,35.31,388.1c21.74-42,43.29-84.07,65-126.09q35.64-69,71.41-138c6-11.66,11-24,18.24-34.87,13.2-19.63,32.63-31.36,55-38.36,12.31-3.85,24.9-5.18,37.85-5,15.39.21,28.77,6.12,42.14,12.56A186.4,186.4,0,0,1,366,85.58c7.9,6.83,15.23,14.33,22.61,21.73,5.72,5.74,6.34,6.14,12,.68,17.69-17,37.57-31.23,57.51-45.33,25.16-17.8,52.82-20.26,81.77-11.56a102.56,102.56,0,0,1,56.68,41.56c3.62,5.31,6,11.44,9,17.23,8,15.86,15.56,31.94,24,47.57,16.7,31,33.9,61.69,50.81,92.55,24.19,44.15,48.19,88.4,72.52,132.48,8.1,14.67,16.89,29,25.51,43.34,10.84,18.09,14.5,37.7,12.44,58.44C788,512.5,777,536.91,755.33,555.73,743,566.43,729,574.94,712.85,578c-22,4.12-44.07,8.67-66.65,8.54-3.15,0-6.3-.47-9.45-.66-6.42-.37-9,2-9.11,8.28-.33,24.83-3.49,49.34-8.44,73.64-6.11,29.92-23,52-49.62,66.32a83.72,83.72,0,0,1-40.14,10.37c-44.94-.15-89.87-.05-134.81-.05Zm48-23.51v.66c20.45,0,40.92-.46,61.35.14,17.34.51,33.78-3.43,49.68-9.15,18.19-6.54,31.07-19.48,36.31-38.41,7.33-26.46,11-53.59,12.16-81,.42-9.61-1.34-11.39-10.83-13.25q-35.7-7-71.35-14.33c-17.62-3.63-32.91-12.13-47-23.11-8.83-6.9-14.44-16.35-20.79-25.32-5.72-8.07-7.39-17.2-8.38-26.35a105.1,105.1,0,0,1,.53-25.86,74.15,74.15,0,0,1,12.4-32.3c12.05-17.19,27.62-29.84,49.17-32.62,9-1.16,18.32-1.69,27.21-.45,15.3,2.14,28.63,9.59,40.3,19.59A114.55,114.55,0,0,1,586.68,434c10.63,12.81,17.79,27.78,23.44,43.14,5.51,15,9.12,30.78,12.75,46.41,2.13,9.17,2.92,18.69,3.84,28.1.46,4.77,3.1,8.22,8,8.13,16.4-.33,32.76.89,49.18-2.48,11.38-2.34,22.75-3.68,33.21-9.37,10-5.42,20.4-10.18,27.42-19.45a94.09,94.09,0,0,0,17.28-37.14c3.55-16.24,2.21-31.8-5-46.67-4.53-9.39-9.93-18.36-14.86-27.56Q729.58,394,717.31,370.88q-30.22-56.74-60.45-113.49C643.76,232.77,631,208,617.54,183.53c-13.33-24.26-24.49-49.66-41.14-72.18-16.87-22.81-38.18-36.44-66.66-36.84a64.81,64.81,0,0,0-26.11,5.21c-10.1,4.39-19.59,10.67-28.39,17.37-12.82,9.75-24.93,20.46-37.09,31-6.54,5.7-6.37,7.52-1.35,14.69Q430.24,162,443.53,181.3c11.86,17.32,23.18,34.88,28.35,55.66,3.77,15.16,4.51,30.3.44,45.37-7,26-23.07,44.34-47.67,55.49-27.13,12.3-62.42,7.34-83.95-13.13-21.25-20.21-28.33-45.75-24.53-74.22,2.79-20.93,10.77-40.36,20.3-59.11,9.69-19.05,21.94-36.43,35.47-52.92,2.69-3.29,3-6.3,0-9.27-8.32-8.36-16.36-17-25.2-24.82C332.65,92,316.41,82.8,299,75.85c-13.38-5.33-27.11-4.39-40.75-1.07C241.18,78.94,226,86.62,215,100.67c-4.84,6.19-8.47,13.41-12.17,20.41-13.95,26.44-27.58,53-41.56,79.46Q127.15,265,92.75,329.3c-13.09,24.6-26.43,49.07-39.13,73.87-8.06,15.74-18.21,30.45-22.85,47.92-5,18.9-5.59,37.45,1.64,55.82,8.14,20.71,21.87,35.42,44.3,40.67,25.49,5.95,51.27,9.71,77.48,10.2,7.68.14,8.46-.42,9.9-8,3.6-19.08,7-38.19,10.52-57.3,3.73-20.49,9.94-40.11,22.36-57.08,12.1-16.54,27.64-28.67,48-33.7a86.32,86.32,0,0,1,50.93,2.81c29.05,10.35,51.48,40.39,51.34,71.21-.11,27.54-11.92,49.93-33.46,66.63-19.54,15.15-42,25-65.89,31-17.83,4.47-36.16,7-54.32,10-4.57.78-6.6,2.79-7,7.39-2.31,27.1,1.71,53.26,10.28,79,5.81,17.47,16.39,30.42,32.07,39.74,15.47,9.2,31.93,12.85,50,12.41,31.58-.77,63.2-.27,94.8-.28Q408.17,721.65,442.62,721.67ZM321,475.56c-.45-3.21-.57-6.92-1.54-10.4-8.82-31.61-45.62-48.61-75.58-34.89-21.12,9.68-33,27.4-38.55,48.85-5.79,22.48-9.47,45.51-13.71,68.37-1.44,7.75-.13,9,7.75,8.22,33.33-3.38,65.06-12.14,93.33-30.66C310.1,513.65,319.78,497.16,321,475.56ZM521.3,424.79c-20.68-1.07-42.63,17.48-48.64,35.73-7.27,22.1-2.93,41.73,12.93,57.92,7.36,7.5,17,13.49,26.7,17.78,10.65,4.73,22.38,7.3,33.87,9.74,15.57,3.3,31.34,5.61,47,8.28,4.85.83,6.93-.9,6.71-5.85a97.22,97.22,0,0,0-1.33-13.87c-3.41-18-8-35.6-14.8-52.65-7.3-18.21-17.46-34.09-33.16-46.32A49,49,0,0,0,521.3,424.79ZM448.22,266.08c.27-17.09-2.31-28.94-8.42-39C426,204.41,411,182.48,396.34,160.3c-2.2-3.32-5.17-2.87-7.47-.05-3.26,4-6.2,8.22-9.26,12.36C362.35,196,349.56,221.49,343.21,250a60,60,0,0,0,5.57,42.14c13.44,25.25,42.4,31,66,20.61C437,303.05,447.33,284.91,448.22,266.08Z" transform="translate(0.32 -45.8)"/>
                    </svg>
                    <svg id="left-nav-logo" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 752.72 169.4" width="80px">
                      <g>
                        <path d="M1.16,173.5V9H108.73V32.8H31V79.23h72.8V103H31V173.5Z" transform="translate(-1.16 -6.43)"/>
                        <path d="M155.39,175.83a49.28,49.28,0,0,1-22-4.78,38.18,38.18,0,0,1-15.16-13,32.31,32.31,0,0,1-5.49-18.44q0-12.6,6.54-20t21.23-10.61q14.7-3.27,39.43-3.27h8.17v-4.9q0-11.67-5.13-16.8T165.66,79a70.18,70.18,0,0,0-19.6,2.91,88.61,88.61,0,0,0-20.3,9l-8.4-19.84a66.87,66.87,0,0,1,14.35-7.35,103.5,103.5,0,0,1,17.5-4.9,93.91,93.91,0,0,1,17.38-1.75q25,0,37.1,11.55t12.14,35.82V173.5h-27.3V155.3a31.92,31.92,0,0,1-12.6,15Q167.29,175.83,155.39,175.83Zm6.07-20.07a25.22,25.22,0,0,0,19-7.93q7.58-7.94,7.58-20.07v-5.13h-7.93q-21.94,0-30.45,3.38t-8.52,12.25a16.27,16.27,0,0,0,5.37,12.6Q151.89,155.76,161.46,155.76Z" transform="translate(-1.16 -6.43)"/>
                        <path d="M236.59,34.9V6.43h32.67V34.9Zm1.87,138.6V59.4h29.17V173.5Z" transform="translate(-1.16 -6.43)"/>
                        <path d="M291,173.5V59.4h28.46V79.46q8.4-20.29,35.94-22.4l8.86-.7,1.87,24.74-16.8,1.63q-28.69,2.8-28.7,29.4V173.5Z" transform="translate(-1.16 -6.43)"/>
                        <path d="M441.22,175.83a45,45,0,0,1-22.51-5.6,36,36,0,0,1-14.82-15.17V173.5H375.42V9h29.17V76.2A37.61,37.61,0,0,1,419.4,62.31a45,45,0,0,1,21.82-5.25q15.16,0,26.37,7.24a48.61,48.61,0,0,1,17.5,20.41q6.3,13.19,6.3,31.62,0,18.2-6.3,31.62a48,48,0,0,1-17.62,20.65Q456.15,175.83,441.22,175.83Zm-8.17-22.17q13.08,0,21-9.45T462,116.33q0-18.66-7.94-27.88t-21-9.22q-13.07,0-21,9.22t-7.93,27.88q0,18.44,7.93,27.88T433.05,153.66Z" transform="translate(-1.16 -6.43)"/>
                        <path d="M508.42,173.5V59.4h28.46V77.13A38.8,38.8,0,0,1,552.63,62.2a47.82,47.82,0,0,1,22.29-5.14q40.37,0,40.36,46.9V173.5H586.12V105.36q0-13.29-5-19.36t-15.51-6.07q-12.84,0-20.42,8t-7.58,21.35V173.5Z" transform="translate(-1.16 -6.43)"/>
                        <path d="M703.72,175.83a45,45,0,0,1-22.52-5.6,36.14,36.14,0,0,1-14.82-15.17V173.5H637.92V9h29.16V76.2A37.57,37.57,0,0,1,681.9,62.31a45,45,0,0,1,21.82-5.25q15.16,0,26.36,7.24a48.54,48.54,0,0,1,17.5,20.41q6.3,13.19,6.3,31.62,0,18.2-6.3,31.62A48,48,0,0,1,730,168.6Q718.65,175.83,703.72,175.83Zm-8.17-22.17q13.07,0,21-9.45t7.93-27.88q0-18.66-7.93-27.88t-21-9.22q-13.06,0-21,9.22t-7.93,27.88q0,18.44,7.93,27.88T695.55,153.66Z" transform="translate(-1.16 -6.43)"/>
                      </g>
                    </svg>
                </NavLink>
            </div>
            <div id='right-nav-info'>
                {sessionUser ? <p id='right-nav-welcome'>Welcome {sessionUser.username}</p>
                    : <div id='right-nav-demo-login' onClick={handleDemoLogin}>Demo Login</div>}
                { loaded && sessionLinks }
            </div>
        </nav>
    );
}

export default Navigation;
